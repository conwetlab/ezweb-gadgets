
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<script language="javascript" src="/ezweb/js/EzWebAPI/EzWebAPI.js"></script>

<script type="text/javascript" language="javascript" src="/ezweb/js/lib/prototype/prototype.js"></script>

<title>RSS List</title>
<script language="javascript">


var rssList = EzWebAPI.createRWGadgetVariable("feedList");
var rssUrl = EzWebAPI.createRWGadgetVariable("rssUrl");


// Rss data structure for managing all RSS subscriptions
var rssStructure;

function init () {
     try {
         rssStructure = eval(rssList.get());
         paintRSSEntries();
     } catch (e) {
         // Problem evaluating JSON, there are no RSS!
         rssStructure =  new Array();
     }

}

function paintRSSEntries()
{
	for (var i=0; i<rssStructure.length; i++)
	{
		var title = rssStructure[i].title;
                var url = rssStructure[i].url;
		addRSS (title, url);
	}
}


function setRSS (feed)
{
    rssUrl.set (feed);
}

function addRSS (title, url)
{
	var html = "<li><a href=\"javascript:setRSS('" + url + "');\">" + title + "</a></li>";
	document.getElementById("list").innerHTML = document.getElementById("list").innerHTML + html;
	document.getElementById("title").innerHTML = "Lista de Feeds"
}

function newRSS () {
     var rss = new Object();

     rss.title = document.getElementById("textRSS").value;
     rss.url = document.getElementById("textRSS").value;

     addRSS(rss.title, rss.url)

     rssStructure.push(rss);
     rssList.set(rssStructure.toJSON());
}

function showAddFeed()
{
	document.getElementById("addFeed").style.display = 'block';
	document.getElementById("addLink").style.display = 'none';
	document.getElementById("feedList").style.display = 'none';
}
function hideAddFeed()
{
	document.getElementById("addFeed").style.display = 'none';
	document.getElementById("addLink").style.display = 'block';
	document.getElementById("feedList").style.display = 'block';
}

</script>

<style type="text/css">
	body {	
		background-color: #ffffcc;
		font-family:"Trebuchet MS","Bitstream Vera Sans",Verdana,Helvetica,sans-serif;
		font-size:12px;
	}
		
	a {
		color:blue;
		text-decoration:none;
	}
		
	a:hover {
		text-decoration:underline;
	}
                
	.title {
		font-size:20px;
		margin-top:10px;
		font-weight:bolder;
		margin-bottom:15px;
	}
	
	#list {
		margin-top:-5px;
	}
	
	li {
		margin-left:-15px;
	}
	
	li a {
		color:#006633;
	}
</style>
</head>
<body onload="init()">
<div id="addFeed" style="display:none;">
<div class="title">A&ntilde;adir Feed</div>
RSS: <input type="text" id="textRSS" />
<button onclick="newRSS();hideAddFeed();">A&ntilde;adir</button><br/>
<a href="javascript:hideAddFeed();">Ocultar</a>
</div>
<div id="addLink"><a href="javascript:showAddFeed();">A&ntilde;adir nuevo feed</a></div>
<div id="feedList">
<div id="title" class="title">Lista de Feeds</div>
<ul id="list">
</ul>
</div>
</body>
</html>

