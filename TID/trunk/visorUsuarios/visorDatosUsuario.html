<!-- 
* This code is licensed under terms shown on this link:
* http://forge.morfeo-project.org/wiki/index.php/Gadgets_2009_License
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script language="javascript" src="/ezweb/js/EzWebAPI/EzWebAPI.js"></script>
<title>Visor de datos de usuario</title>

<style type="text/css">
		body{
			margin:0px;
			padding:0px;
			background: url(http://ezweb.tid.es/repository/ezweb-gadgets/visorUsuarios/visorUsuarios_1.01/background.png) repeat-x scroll left top;
		}

		#info {
			margin:0px;
			padding:0px;
		}
	
		#div_info {
			margin:4px;
			padding:5px;
			border:2px solid #437BC8;
			background-color:white;
			-moz-border-radius:5px;
		}

		.moreInfo{
			text-decoration:underline;
		}
		
		th{
			text-align:left;
		}
		
		td{
			font-size:12px;
			padding-left:5px;
		}
		
		#title{
			color:#000077;
			font-size:22px;
			font-weight:bold;
			margin:0px;
			padding:0px;
	}
</style>

<script>
var phoneNumber = EzWebAPI.createRGadgetVariable("phoneNumber",_phoneHandler);
var address = EzWebAPI.createRWGadgetVariable("address");
/*Temporary data for the demo*/
var users = [];
var user = ["Alejandro","Rodriguez Perez","07688357J","Santa Engracia, 25, 1 B, Madrid","35.50","2"];
users["913933233"] = user;
user = ["Marta","Lopez Romero","34788114L","Marcelo Usera, 46, 3 C, Madrid","40.74","1"];
users["915334432"] = user;
user = ["Rodrigo","Fernandez Bartolome","53333236P","Gran Via, 25, 2 A, Madrid","55.29","8"];
users["916432233"] = user;
user = ["Maria","Perez Casas","34788114L","Francisco Silvela, 105, 5 B, Madrid","66.15","3"];
users["917294723"] = user;
user = ["Alberto","Garcia Casas","34788114L","Camarena, 2, 4 A, Madrid","36.00","3"];
users["917744331"] = user;

function _phoneHandler(phone){
	if (phone!=null && phone!=undefined){
		var content="";
		content+="<div id='div_info'><p id='title'>Tabla de Datos de Usuario</p><table>";
		content+="<tr><th>Datos del Usuario</th><th>Valor</th></tr>";
		content+="<tr><td class='moreInfo'>Nombre</td><td>"+users[phone][0]+"</td></tr>";
		content+="<tr><td class='moreInfo'>Apellidos</td><td>"+users[phone][1]+"</td></tr>";
		content+="<tr><td class='moreInfo'>DNI</td><td>"+users[phone][2]+"</td></tr>";
		content+="<tr><td class='moreInfo'>Direcci√≥n</td><td>"+users[phone][3]+"</td></tr>";
		content+="<tr><td class='moreInfo'>Factura media</td><td>"+users[phone][4]+"</td></tr>";
		content+="<tr><td class='moreInfo'>Antiguedad</td><td>"+users[phone][5]+"</td></tr></table></div>";
		if (document.getElementById("info")){
			document.getElementById("info").innerHTML=content;
			address.set(users[phone][3]);
		}
	}
}


</script>
</head>
<body>
<div id='info'><i>A la espera de seleccionar una averia...</i></div>
</body>
</html>
